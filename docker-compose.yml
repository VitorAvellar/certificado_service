services:
  web:
    build: .
    ports:
      - "5000:5000"
    volumes:
      - ./certificados:/app/certificados  # Diretório para salvar certificados PDF
      - ./certificados.db:/app/certificados.db  # Volume para o arquivo SQLite
    environment:
      - FLASK_ENV=development
      
  worker:
    build: .
    command: python worker.py
    depends_on:
      - rabbitmq  # Garante que o RabbitMQ esteja rodando antes do worker
  
  rabbitmq:
    image: "rabbitmq:3-management"  # Versão do RabbitMQ com painel de controle
    ports:
      - "5672:5672"  # Porta padrão do RabbitMQ
      - "15672:15672"  # Porta do painel de administração do RabbitMQ
